
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>High Performance Computing &#8212; Abil 25.03.10 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=888e13d6"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'source/user-guide/hpc';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="API Reference" href="../reference/index.html" />
    <link rel="prev" title="2-phase Ensemble" href="two-phase-ensemble.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Abil 25.03.10 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../development/index.html">
    How to contribute
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting-started/index.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../development/index.html">
    How to contribute
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="yaml-config.html">Model YAML Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="one-phase-ensemble.html">1-phase Ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="two-phase-ensemble.html">2-phase Ensemble</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">High Performance Computing</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">High Performance Computing</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="high-performance-computing">
<h1>High Performance Computing<a class="headerlink" href="#high-performance-computing" title="Link to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tutorial assumes some basic familiarity with Unix and high performance computing.
To run the scripts on your HPC system, it needs to have both SLURM and Apptainer or Singularity installed.
If you are unsure this is the case, we recommend contacting your HPC admin team.</p>
</div>
<section id="hpc-at-the-university-of-bristol">
<h2>HPC at the University of Bristol<a class="headerlink" href="#hpc-at-the-university-of-bristol" title="Link to this heading">#</a></h2>
<p>If you are running Abil at the University of Bristol, we recommend first completing the <a class="reference external" href="https://github.com/UoB-HPC/hpc-course-getting-started">Getting Started HPC Course</a>.
If you are running at another institution, we recommend familiarizing yourself with your local HPC machine.</p>
</section>
<section id="installing-singularity">
<h2>Installing Singularity<a class="headerlink" href="#installing-singularity" title="Link to this heading">#</a></h2>
<p>To simplify installing packages and dependencies on HPC machines, which often require admin approval, we use containers.
Here we use Singularity, which packages all of the requirements for running Abil into a portable and reproducible container that does not require root privileges.
There are two software options for creating Singularity containers, Singularity and Apptainer.
Apptainer is often easier to install than Singularity and is backwards compatible with legacy Singularity installs.
Both require a Linux operating system, but provide instructions for installing on Windows or Mac OS.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Unix</label><div class="sd-tab-content docutils">
<p><a class="reference external" href="https://apptainer.org/docs/admin/main/installation.html">Install Apptainer</a></p>
<p><a class="reference external" href="https://docs.sylabs.io/guides/3.0/user-guide/installation.html">Install Singularity</a></p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Windows/MacOS</label><div class="sd-tab-content docutils">
<p>Singularity/Apptainer is not natively supported on Windows or MacOS and requires a Virtual Machine (VM).
For more details see the <a class="reference external" href="https://apptainer.org/docs/admin/main/installation.html#installation-on-windows-or-mac">Apptainer admin guide</a>
or the <a class="reference external" href="https://docs.sylabs.io/guides/3.0/user-guide/installation.html#install-on-windows-or-mac">Singularity admin guide</a></p>
</div>
</div>
</section>
<section id="building-singularity-container">
<h2>Building Singularity Container<a class="headerlink" href="#building-singularity-container" title="Link to this heading">#</a></h2>
<p>To run Abil on a HPC machine, first compile Singularity from the terminal:</p>
<p>First, change directory to the Singularity folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">./</span><span class="n">Abil</span><span class="o">/</span><span class="n">singularity</span><span class="o">/</span>
</pre></div>
</div>
<p>If using Apptainer (recommended):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apptainer</span> <span class="n">build</span> <span class="n">abil</span><span class="o">.</span><span class="n">sif</span> <span class="n">Singularity</span><span class="o">.</span><span class="n">sif</span>
</pre></div>
</div>
<p>If using Singularity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">singularity</span> <span class="n">build</span> <span class="n">abil</span><span class="o">.</span><span class="n">sif</span> <span class="n">Singularity</span><span class="o">.</span><span class="n">sif</span>
</pre></div>
</div>
</section>
<section id="transfer-abil-to-your-hpc-machine">
<h2>Transfer Abil to your HPC Machine<a class="headerlink" href="#transfer-abil-to-your-hpc-machine" title="Link to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Unix/MacOS</label><div class="sd-tab-content docutils">
<p>To transfer to your home directory (~):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="o">-</span><span class="n">r</span> <span class="o">./</span><span class="n">Abil</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="nd">@HPC_machine</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="p">:</span><span class="o">~</span>
</pre></div>
</div>
<p>To transfer to a specific directory (ex. /user/work/username):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="o">-</span><span class="n">r</span> <span class="o">./</span><span class="n">Abil</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="nd">@HPC_machine</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="p">:</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">username</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
Windows</label><div class="sd-tab-content docutils">
<p>To transfer from a Windows machine, use <a class="reference external" href="https://winscp.net/eng/index.php">WinSCP</a>.</p>
<p>To use WinSCP, type the host in the <cite>Host name</cite> box, then enture your username in the <cite>User Name</cite> box.</p>
<p>For more instructions, check with your organization.</p>
</div>
</div>
</section>
<section id="slurm-scripts">
<h2>SLURM scripts<a class="headerlink" href="#slurm-scripts" title="Link to this heading">#</a></h2>
<p>To execute Abil on an HPC machine, we use SLURM scripts. The SLURM script tells the HPC machine what to load (the Singularity container), what to execute (Python scripts), and how much compute is required, in a single executable file.</p>
<section id="variable-declarations">
<h3>Variable declarations<a class="headerlink" href="#variable-declarations" title="Link to this heading">#</a></h3>
<p>The first part of the bash script declares the variables needed to execute the job.
Here, we include the time limit for the run (time), the number of nodes to use (nodes), the memory allocation (mem),
the number of cpus per task (cpus-per-task), and the number of targets to be tuned (array).</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#SBATCH --time=0-6:00:00</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --mem=10000M</span>
<span class="c1">#SBATCH --cpus-per-task=16</span>
<span class="c1">#SBATCH --array=0-1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The wall time (<cite>–time</cite>), amount of RAM (<cite>–mem</cite>) and number of threads (<cite>–cpus-per-task</cite>) will vary depending on the size of your dataset, the number of hyper-parameters and your HPC hardware.</p>
</div>
</section>
<section id="executable-commands">
<h3>Executable commands<a class="headerlink" href="#executable-commands" title="Link to this heading">#</a></h3>
<p>The next part of the bash script includes the commands to be executed.
First, the array value is used to set a local variable that will be used to specify the target being tuned.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">i</span><span class="o">=</span><span class="si">${</span><span class="nv">SLURM_ARRAY_TASK_ID</span><span class="si">}</span>
</pre></div>
</div>
<p>Next, the Apptainer module is loaded, and set up using the abil.sif container uploaded prior.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>module<span class="w">  </span>load<span class="w"> </span>apptainer/1.3.1<span class="w"> </span>

singularity<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="se">\</span>
-B/user/work/<span class="k">$(</span>whoami<span class="k">)</span>:/user/work/<span class="k">$(</span>whoami<span class="k">)</span><span class="w"> </span><span class="se">\</span>
/user/work/<span class="k">$(</span>whoami<span class="k">)</span>/Abil/singularity/abil.sif<span class="w"> </span><span class="se">\</span>
</pre></div>
</div>
<p>Finally, the model Python script is executed using the specified number of cpus, for the target “i”, within a specific model (knn in this instance).
Lastly, the Singularity cache is exported.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>/user/work/<span class="k">$(</span>whoami<span class="k">)</span>/Abil/hpc_tune.py<span class="w"> </span><span class="si">${</span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="w"> </span><span class="s2">&quot;knn&quot;</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">SINGULARITY_CACHEDIR</span><span class="o">=</span>/user/work/<span class="k">$(</span>whoami<span class="k">)</span>/.singularity
</pre></div>
</div>
</section>
<section id="alterations-for-predict-and-post">
<h3>Alterations for predict and post<a class="headerlink" href="#alterations-for-predict-and-post" title="Link to this heading">#</a></h3>
<p>The set up is the same for each the predict.sh and post.sh scripts, with the only change being the Python executable line.
predict.sh should say the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>/user/work/<span class="k">$(</span>whoami<span class="k">)</span>/Abil/hpc_predict.py<span class="w"> </span><span class="si">${</span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">i</span><span class="si">}</span>
</pre></div>
</div>
<p>while post.sh should say the following, and does not include the array specification:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>/user/work/<span class="k">$(</span>whoami<span class="k">)</span>/Abil/hpc_post.py<span class="w"> </span>
</pre></div>
</div>
<section id="execute-abil-on-your-hpc-machine">
<h4>Execute Abil on your HPC Machine<a class="headerlink" href="#execute-abil-on-your-hpc-machine" title="Link to this heading">#</a></h4>
<p>To login to your HPC account, follow your organizations directions.</p>
<p>Example (ssh):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="nd">@HPC_machine</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span>
</pre></div>
</div>
<p>Change directory to Abil:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">Abil</span>
</pre></div>
</div>
<p>Change directory to the folder containing your bash scripts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">hpc_example</span>
</pre></div>
</div>
<p>Submit hpc tuning jobs (ex. using slurm):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sbatch</span> <span class="n">tune_RF</span><span class="o">.</span><span class="n">sh</span>
<span class="n">sbatch</span> <span class="n">tune_KNN</span><span class="o">.</span><span class="n">sh</span>
<span class="n">sbatch</span> <span class="n">tune_XGB</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>After tune.sh jobs are finshed, submit predict job:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sbatch</span> <span class="n">predict</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>After predict.sh is finished, submit post job:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sbatch</span> <span class="n">post</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
<section id="singularity-file">
<h4>Singularity file<a class="headerlink" href="#singularity-file" title="Link to this heading">#</a></h4>
<p>Below is the Singularity.sif file text. This is used to create abil.sif in the steps above.</p>
<div class="highlight-Singularity notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>:<span class="w"> </span>docker
<span class="k">From</span>:<span class="w"> </span>continuumio/miniconda3

<span class="gh">%files</span>
<span class="w">    </span>../../dist/abil-25.03.06.tar.gz<span class="w"> </span>/root
<span class="w">    </span>../../examples/conda/environment.yml<span class="w"> </span>/root

<span class="gh">%post</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;. /opt/conda/etc/profile.d/conda.sh&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="w">    </span>.<span class="w"> </span>/opt/conda/etc/profile.d/conda.sh
<span class="w">    </span>conda<span class="w"> </span>install<span class="w"> </span>-n<span class="w"> </span>base<span class="w"> </span>conda-libmamba-solver
<span class="w">    </span>conda<span class="w"> </span>config<span class="w"> </span>--set<span class="w"> </span>solver<span class="w"> </span>libmamba
<span class="w">    </span>conda<span class="w"> </span>config<span class="w"> </span>--set<span class="w"> </span>channel_priority<span class="w"> </span><span class="nb">true</span>
<span class="w">    </span>conda<span class="w"> </span>config<span class="w"> </span>--add<span class="w"> </span>channels<span class="w"> </span>conda-forge
<span class="w">    </span>conda<span class="w"> </span>env<span class="w"> </span>update<span class="w"> </span>-n<span class="w"> </span>base<span class="w"> </span>--file<span class="w"> </span>/root/environment.yml
<span class="w">    </span><span class="nb">cd</span>
<span class="w">    </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>abil-25.03.06.tar.gz

<span class="gh">%runscript</span>
<span class="w">    </span>.<span class="w"> </span>/opt/conda/etc/profile.d/conda.sh
<span class="w">    </span><span class="nb">exec</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="two-phase-ensemble.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">2-phase Ensemble</p>
      </div>
    </a>
    <a class="right-next"
       href="../reference/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API Reference</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Abil developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>